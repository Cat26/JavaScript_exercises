<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Speech rcongnition</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-sm-4">
                    <div class="intro">
                        <h2>Short guide:</h2>
                        <ol>
                            <li>Say something you want to save</li>
                            <li>Say "listenn music" to play music</li>
                            <li>Say "stop music" to stop playing music</li>
                            <li>Say "red", "pink" or "green" to change bacground color</li>
                        </ol>
                    </div>
                </div>
                <div class="col-sm-8">
                    <h1>Speech Detection:</h1>
                    <div class="words" contenteditable></div>
                    <audio class="music" src=http://www.hochmuth.com/mp3/Haydn_Cello_Concerto_D-1.mp3></audio>
                </div>
            </div>
        </div>
    </body>
        <script>
            const music = document.querySelector('.music');
            
            window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            const recognition = new SpeechRecognition();
            recognition.interimResults =true;
            let p = document.createElement('p');
            const words = document.querySelector('.words');
            words.appendChild(p);
            
            function change_color(color){
                words.style.background = color;
            }
            
            recognition.addEventListener('result', e =>{
                const transcript = Array.from(e.results)
                    .map(result => result[0])
                    .map(result => result.transcript)
                .join('')
                
                
                p.textContent = transcript;
                if(e.results[0].isFinal){
                    p = document.createElement('p');
                    words.appendChild(p);
                }
                if(transcript.includes('listen music')){
                    music.currentTime = 0;
                    music.play();
                }
                if(transcript.includes('stop music')){
                        music.pause();
                        currentTime = 0;
                }
                
                if(transcript.includes('Red' || 'red')){
                    change_color('red');
                }
                if(transcript.includes('Pink' || 'pink')){
                    change_color('pink');
                }
                if(transcript.includes('Green' || 'green')){
                    change_color('green');
                }
                
                console.log(transcript);
                
            });
            
            recognition.addEventListener('end', recognition.start);
            
            recognition.start();
           
        </script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
   
</html>